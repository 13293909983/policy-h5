<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta charset="utf-8" name="viewport"
	content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no" />
<title>电子保函服务平台</title>
<link th:href="@{css/index.css}" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="css/paging.css">
<link th:href="@{css/animate.min.css}" rel="stylesheet">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="js/index.js" type="text/javascript"></script>
</head>
<body>
	<div class="top_wrap">
		<div class="login_wrap">
			<!-- <div class="login_a">

				<a href="/login.html">登录</a><span style="margin-left: 0.04rem;">|</span>
				<a href="/register.html">注册</a>
			</div> -->
			<!--<a>山西伟鑫科创信息技术服务有限公司</a>
		<div class="login_b">
			<a href="#"><span style="margin-right: 0.04rem;">|</span>退出</a>
		</div>-->
		</div>
	</div>
	<header></header>
	<div class="body_main">
		<div class="topone_wrap">
			<div class="topone_title">
				<p>政策法规</p>
			</div>
		</div>
		<div class="policy_wrap">
			<div class="policy_all">
				<h3>今日关注</h3>

				<div class="policy_today">

					<div class="slide_wrap">
						<div class="pre_left">
							<span class="pre"></span>
						</div>
						<div class="box" th:if="${listfu.size()>1}" th:onclick="regulations([[${lists[0].id}]])">
							<ul class="img_box">
								<li class="img_li" th:each="array,arrays:${listfu}"><a href="#"><img th:src="${array}"></a></li>
							</ul>
						</div>
						<div class="box" th:if="${listfu.size()==1}" th:onclick="regulations([[${lists[0].id}]])">
							<ul class="img_bo">
								<li class="img_li" th:each="array,arrays:${listfu}"><a href="#"><img th:src="${array}"></a></li>
							</ul>
						</div>
						<div class="next_right">
							<span class="next"></span>
						</div>

					</div>
					<div class="policy_left">
						<h3 th:text="${lists[0].title}" style="cursor:pointer;"></h3>
						<p class="policy_fromtime">
							<span th:text="'类型：'+${lists[0].regulationstype}"></span><span
								th:text="'发布时间：'+${lists[0].releasetime}"></span>
						</p>
						<hr
							style="height: 1px; border: none; border-top: 1px dashed #5CACEE;" />
						<div class="policycontent">
							<p th:text="${lists[0].content}"></p>
						</div>
					</div>
				</div>


				<div class="policy_news">

					<div class="policy_list">
						<p class="policy_name">政策法规</p>
						<p class="policy_time">发布日期</p>
						<p class="policy_people">类型</p>
					</div>
					<ul class="lists_ul show">
						<li class="lists_li"></li>
					</ul>
					<div class="paging_policy">
						<div class="pagger-box pagger" id="box"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="fixed"></div>
	<footer></footer>
</body>
<script type="text/javascript" src="js/paging.js" ></script>

<script th:inline="javascript">
var totalpages=[[${totalpages}]];
var totalCount=[[${totalCount}]];
      $('#box').paging({
          initPageNo: 1, // 初始页码
          totalPages: totalpages, //总页数
          totalCount: '合计' + totalCount + '条数据', // 条目总数
          slideSpeed: 600, // 缓动速度。单位毫秒
          jump: true, //是否支持跳转
          callback: function(page) { // 回调函数
              console.log(page);
          	Pagelist(page,1); 
          }
      })

      function Pagelist(startIndex,laws){
    	  $.ajax({
				url:'queryhtmlpolicy',
				type:'post',
				data:{
					laws:laws,
					startIndex:startIndex
				},
				success:function(result){
					 $(".show").html('');
					 var childs="<li class='lists_li'></li>";
					 $(".show").innerHTML = childs;
					 $.each(result.data.pageRecords,function(index,n){
						  var rowDiv=document.createElement('li');
						    rowDiv.className="lists_li";
						    var child="<span onclick='regulations("+result.data.pageRecords[index].id+")' style='cursor:pointer;''>"+result.data.pageRecords[index].title+"</span> <span>"+result.data.pageRecords[index].releasetime+"</span> <span>"+result.data.pageRecords[index].regulationstype+"</span>";
						    $(".show").append(rowDiv);
							rowDiv.innerHTML = child;
					 })
				}
    	  })
      }
	function regulations(id){
		window.open("news.html?id="+id);
	}
 </script>
</html>
